---
import Card from "./card.astro";
import type { CommonBlog } from "../lib/cms";

// Purpose: Fetch the blogposts
interface Props {
  posts: Array<CommonBlog>;
}

const { posts } = Astro.props as Props;
---

<div class="mt-4 px-0">
  <div class="grid grid-flow-row md:grid-cols-2 lg:grid-cols-3 gap-4">
    {
      posts.map((post) => (
        <Card
          title={post.title}
          link={`blog/${post.slug}`}
          description={post.description || "TODO: Fix description defaults"}
          tags={post.tags}
          date={post.date}
          draft={post.status === "draft"}
        />
      ))
    }
  </div>
  <br />
  <a class="link" href="/blog/">More blog posts...</a>
</div>

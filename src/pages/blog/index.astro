---
import Layout from "~/layouts/Layout.astro";
import PageContainer from "~/layouts/page-container.astro";
import Card from "../../components/card.astro";
import Section from "../../components/Section.astro";
import { getPosts } from "../../lib/cms";

const allPosts = await getPosts();
---

<Layout title="Blog posts">
	<PageContainer>
		<Section title="Blog posts" class="bg-gray-200 text-black">
			<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
				{
					allPosts.map(({ data: p, ...post }) => (
						<Card
							title={p.title}
							link={post.id}
							description={p.description}
							tags={p.tags}
							date={p.date}
							draft={p.draft}
						/>
					))
				}
			</div>
		</Section>
	</PageContainer>
</Layout>

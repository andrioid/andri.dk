<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.900df1c3c2b01e2f3aa4.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:normal;font-display:swap;font-weight:200;src:local("Source Code Pro Extra Light "),local("Source Code Pro-Extra Light"),url(/static/source-code-pro-latin-200-7929be933d3552eb77ae74ed482edd4c.woff2) format("woff2"),url(/static/source-code-pro-latin-200-a78d486236cc870b23add126c957a96b.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:italic;font-display:swap;font-weight:200;src:local("Source Code Pro Extra Light italic"),local("Source Code Pro-Extra Lightitalic"),url(/static/source-code-pro-latin-200italic-4a1315d866bb14f3d31685aab98997ae.woff2) format("woff2"),url(/static/source-code-pro-latin-200italic-718bc0370b668124f8887c28bff18c2e.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:normal;font-display:swap;font-weight:300;src:local("Source Code Pro Light "),local("Source Code Pro-Light"),url(/static/source-code-pro-latin-300-05cc2c0fc3e3121d720b5ee70cfd6afd.woff2) format("woff2"),url(/static/source-code-pro-latin-300-1c47db5a64cd8e3d983259b371d0d5fa.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:italic;font-display:swap;font-weight:300;src:local("Source Code Pro Light italic"),local("Source Code Pro-Lightitalic"),url(/static/source-code-pro-latin-300italic-4ad0dc856bc3228500b873880fab4e1d.woff2) format("woff2"),url(/static/source-code-pro-latin-300italic-093df00093e5e0fe37773e0d7c6fb6ff.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:normal;font-display:swap;font-weight:400;src:local("Source Code Pro Regular "),local("Source Code Pro-Regular"),url(/static/source-code-pro-latin-400-ba66f53e94dde1e31fac1932cc739874.woff2) format("woff2"),url(/static/source-code-pro-latin-400-4da4c19319100df7734c4643db00d6c7.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:italic;font-display:swap;font-weight:400;src:local("Source Code Pro Regular italic"),local("Source Code Pro-Regularitalic"),url(/static/source-code-pro-latin-400italic-50463ff924c5ff8fc5a251a4c226bccd.woff2) format("woff2"),url(/static/source-code-pro-latin-400italic-7dbdb6041676a97bc34f6b0469c98a8c.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:normal;font-display:swap;font-weight:500;src:local("Source Code Pro Medium "),local("Source Code Pro-Medium"),url(/static/source-code-pro-latin-500-83f8dbd217e442fe487c0ef9a37c1ae2.woff2) format("woff2"),url(/static/source-code-pro-latin-500-42da41ae25d3b3c862fff0c428d236a8.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:italic;font-display:swap;font-weight:500;src:local("Source Code Pro Medium italic"),local("Source Code Pro-Mediumitalic"),url(/static/source-code-pro-latin-500italic-583bdba832bc28f1cdf5aea4b3e8b933.woff2) format("woff2"),url(/static/source-code-pro-latin-500italic-34129a340c8fa438eedd4ec4a87d10a9.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:normal;font-display:swap;font-weight:600;src:local("Source Code Pro SemiBold "),local("Source Code Pro-SemiBold"),url(/static/source-code-pro-latin-600-91ba30cbf85d016293faaffca00c70f4.woff2) format("woff2"),url(/static/source-code-pro-latin-600-c7b880d9ff70cd596455a3e0f3b0382d.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:italic;font-display:swap;font-weight:600;src:local("Source Code Pro SemiBold italic"),local("Source Code Pro-SemiBolditalic"),url(/static/source-code-pro-latin-600italic-b3f00feacbbc787ef66b2335675afe91.woff2) format("woff2"),url(/static/source-code-pro-latin-600italic-184535ef2bff6e93317ae2da353ffa2f.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:normal;font-display:swap;font-weight:700;src:local("Source Code Pro Bold "),local("Source Code Pro-Bold"),url(/static/source-code-pro-latin-700-f30df9add886db4ddba84ba52f743536.woff2) format("woff2"),url(/static/source-code-pro-latin-700-0907d2be1ee9fab7beff3730a528f091.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:italic;font-display:swap;font-weight:700;src:local("Source Code Pro Bold italic"),local("Source Code Pro-Bolditalic"),url(/static/source-code-pro-latin-700italic-edaeebc559781bad341a30096b61b8c1.woff2) format("woff2"),url(/static/source-code-pro-latin-700italic-ea194f84bdcddc7053428c66970db387.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:normal;font-display:swap;font-weight:900;src:local("Source Code Pro Black "),local("Source Code Pro-Black"),url(/static/source-code-pro-latin-900-82b0c945e063dcd47648d66785b08c87.woff2) format("woff2"),url(/static/source-code-pro-latin-900-62fcce6dcf3f44b5f987d84394b26724.woff) format("woff")}@font-face{font-family:Source Code Pro;font-style:italic;font-display:swap;font-weight:900;src:local("Source Code Pro Black italic"),local("Source Code Pro-Blackitalic"),url(/static/source-code-pro-latin-900italic-cf2b0b73c034774d8ee0cc864c3e38c1.woff2) format("woff2"),url(/static/source-code-pro-latin-900italic-c4beb1b3e1ef3fcefe9f7a7b6bcceebc.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.command-line-prompt>span:before{color:#999;content:" ";display:block;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}

/*! tailwindcss v2.1.2 | MIT License | https://tailwindcss.com */

/*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}hr{height:0;color:inherit}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:montserrat,helvetica,arial;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{box-sizing:border-box;border:0 solid #e5e7eb}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input:-ms-input-placeholder,textarea:-ms-input-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:source code pro}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.andri-tag{--tw-bg-opacity:1;background-color:rgba(75,85,99,var(--tw-bg-opacity));border-radius:.125rem;display:inline-block;font-weight:600;font-size:.875rem;line-height:1.25rem;margin-right:.5rem;margin-bottom:.5rem;padding:.25rem .75rem;--tw-shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow);color:rgba(243,244,246,var(--tw-text-opacity));text-transform:lowercase}.andri-tag,a.link{--tw-text-opacity:1}a.link{color:rgba(49,46,129,var(--tw-text-opacity))}a.link:hover{text-decoration:underline}.btn{background-color:rgba(59,130,246,var(--tw-bg-opacity));border-radius:.25rem;font-weight:600;padding:.5rem 1rem;--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.btn,.btn:hover{--tw-bg-opacity:1}.btn:hover{background-color:rgba(29,78,216,var(--tw-bg-opacity))}.markdown{font-size:1.125rem;line-height:1.75rem;line-height:1.5;--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.markdown li>p+p,.markdown p+p{margin-top:1rem}.markdown strong{font-weight:700;--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.markdown a{font-weight:600;--tw-text-opacity:1;color:rgba(30,64,175,var(--tw-text-opacity))}.markdown strong a{font-weight:700}.markdown h1{font-size:1.875rem;line-height:2.25rem;line-height:1.5}.markdown h1,.markdown h2{font-weight:600;margin-bottom:.5rem;margin-top:2.5rem;--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.markdown h2{font-size:1.5rem;line-height:2rem;line-height:1.5}.markdown h3{font-size:1.25rem;font-weight:600;font-size:1.125rem;line-height:1.75rem;line-height:1.5;margin-bottom:.5rem;margin-top:2rem;--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.markdown .gatsby-highlight{border-radius:0;margin-top:1.25rem;margin-bottom:1.25rem;overflow:auto}.markdown .gatsby-highlight code{padding-top:0;padding-bottom:0}.markdown .gatsby-highlight pre[class*=language-].line-numbers{padding-left:.25rem}.markdown .command-line-prompt>span[data-user]:before{content:"$"}.markdown .gatsby-resp-image-wrapper{margin-right:0;margin-left:0;max-width:0}.markdown code,.markdown pre{font-family:source code pro;margin:0;padding:.5rem;white-space:pre}.markdown blockquote{--tw-border-opacity:1;border-color:rgba(55,65,81,var(--tw-border-opacity));border-left-width:4px;margin-top:1rem;margin-bottom:1rem;padding:.5rem 1rem}.markdown ol{list-style-type:decimal;margin-top:1rem;padding-left:1.25rem}.markdown ul{list-style-position:inside;list-style-type:disc;margin-top:1rem}.bg-white{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.bg-red-400{--tw-bg-opacity:1;background-color:rgba(248,113,113,var(--tw-bg-opacity))}.bg-blue-700{--tw-bg-opacity:1;background-color:rgba(29,78,216,var(--tw-bg-opacity))}.rounded-full{border-radius:9999px}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.table{display:table}.hidden{display:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.flex-1{flex:1 1 0%}.flex-grow{flex-grow:1}.flex-shrink-0{flex-shrink:0}.font-headline,.font-sans{font-family:montserrat,helvetica,arial}.font-light{font-weight:300}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-4{height:1rem}.h-8{height:2rem}.h-16{height:4rem}.h-20{height:5rem}.h-full{height:100%}.text-sm{font-size:.875rem;line-height:1.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem}.text-lg,.text-xl{line-height:1.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.leading-relaxed{line-height:1.625}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mx-5{margin-left:1.25rem;margin-right:1.25rem}.mx-10{margin-left:2.5rem;margin-right:2.5rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.ml-2{margin-left:.5rem}.mt-4{margin-top:1rem}.mr-4{margin-right:1rem}.mb-4{margin-bottom:1rem}.mt-6{margin-top:1.5rem}.mr-6{margin-right:1.5rem}.mb-6{margin-bottom:1.5rem}.ml-6{margin-left:1.5rem}.mt-10{margin-top:2.5rem}.max-w-xl{max-width:36rem}.max-w-4xl{max-width:56rem}.min-h-screen{min-height:100vh}.min-w-half-screen{min-width:50vw}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-10{padding:2.5rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.pt-2{padding-top:.5rem}.pt-4{padding-top:1rem}.pb-4{padding-bottom:1rem}.pl-6{padding-left:1.5rem}.pb-8{padding-bottom:2rem}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}*{--tw-shadow:0 0 transparent}.shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06)}.shadow,.shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05)}.hover\:shadow-2xl:hover,.shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,0.25);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}*{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}.text-right{text-align:right}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgba(107,114,128,var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity:1;color:rgba(75,85,99,var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.text-red-700{--tw-text-opacity:1;color:rgba(185,28,28,var(--tw-text-opacity))}.text-blue-200{--tw-text-opacity:1;color:rgba(191,219,254,var(--tw-text-opacity))}.hover\:text-white:hover{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.hover\:text-gray-400:hover{--tw-text-opacity:1;color:rgba(156,163,175,var(--tw-text-opacity))}.italic{font-style:italic}.uppercase{text-transform:uppercase}.tracking-tight{letter-spacing:-.025em}.align-middle{vertical-align:middle}.w-4{width:1rem}.w-8{width:2rem}.w-16{width:4rem}.w-full{width:100%}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}.filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:640px){.sm\:pt-4{padding-top:1rem}.sm\:pr-4{padding-right:1rem}.sm\:w-1\/2{width:50%}}@media (min-width:768px){.md\:block{display:block}.md\:flex{display:flex}.md\:h-8{height:2rem}.md\:h-48{height:12rem}.md\:text-base{font-size:1rem;line-height:1.5rem}.md\:text-lg{font-size:1.125rem;line-height:1.75rem}.md\:text-2xl{font-size:1.5rem;line-height:2rem}.md\:text-3xl{font-size:1.875rem;line-height:2.25rem}.md\:text-6xl{font-size:3.75rem;line-height:1}.md\:mx-10{margin-left:2.5rem;margin-right:2.5rem}.md\:mx-20{margin-left:5rem;margin-right:5rem}.md\:ml-0{margin-left:0}.md\:max-w-4xl{max-width:56rem}.md\:min-h-one-third-screen{min-height:33vh}.md\:p-0{padding:0}.md\:px-0{padding-left:0;padding-right:0}.md\:py-10{padding-top:2.5rem;padding-bottom:2.5rem}.md\:px-10{padding-left:2.5rem;padding-right:2.5rem}.md\:px-20{padding-left:5rem;padding-right:5rem}.md\:pl-0{padding-left:0}.md\:invisible{visibility:hidden}.md\:w-8{width:2rem}.md\:w-48{width:12rem}}@media (min-width:1024px){.lg\:inline-block{display:inline-block}.lg\:text-xl{font-size:1.25rem;line-height:1.75rem}.lg\:mx-40{margin-left:10rem;margin-right:10rem}.lg\:mt-0{margin-top:0}.lg\:mb-0{margin-bottom:0}.lg\:px-10{padding-left:2.5rem;padding-right:2.5rem}.lg\:px-40{padding-left:10rem;padding-right:10rem}.lg\:pr-6{padding-right:1.5rem}.lg\:w-1\/3{width:33.333333%}}@media (min-width:1280px){.xl\:w-1\/3{width:33.333333%}.xl\:w-1\/4{width:25%}}</style><meta name="generator" content="Gatsby 3.3.1"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Deploying a Full-Stack app on Google with Terraform | andri.dk</title><link data-react-helmet="true" rel="alternate" type="application/rss+xml" href="/rss.xml" title="Deploying a Full-Stack app on Google with Terraform | andri.dk"/><meta data-react-helmet="true" name="description" content="In this series, we are going to setup continuous deployment on Github Actions that will deploy a full environment in the cloud. Then we will setup a scheduled action to tear it all down, if we&#x27;re not using it. Part 1: Covers the infrastructure setup…"/><meta data-react-helmet="true" name="author" content="Andri Óskarsson"/><meta data-react-helmet="true" property="og:url" content="https://andri.dk/blog/2020/devops/app-stack-with-terraform-on-gcp"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Deploying a Full-Stack app on Google with Terraform | andri.dk"/><meta data-react-helmet="true" property="og:site_name" content="andri.dk"/><meta data-react-helmet="true" property="og:description" content="In this series, we are going to setup continuous deployment on Github Actions that will deploy a full environment in the cloud. Then we will setup a scheduled action to tear it all down, if we&#x27;re not using it. Part 1: Covers the infrastructure setup…"/><meta data-react-helmet="true" name="image" property="og:image" content="https://andri.dk/gatsby-plugin-social-card/e00a0abd-10c6-5b53-a63f-14500c2196bf.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="andrioid"/><meta data-react-helmet="true" name="twitter:title" content="Deploying a Full-Stack app on Google with Terraform | andri.dk"/><meta data-react-helmet="true" name="twitter:description" content="In this series, we are going to setup continuous deployment on Github Actions that will deploy a full environment in the cloud. Then we will setup a scheduled action to tear it all down, if we&#x27;re not using it. Part 1: Covers the infrastructure setup…"/><meta data-react-helmet="true" name="twitter:image" content="https://andri.dk/gatsby-plugin-social-card/e00a0abd-10c6-5b53-a63f-14500c2196bf.jpg"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-af92fa083a7f98bc41ca.js"/><link as="script" rel="preload" href="/framework-8120a7f15645c7323525.js"/><link as="script" rel="preload" href="/app-9a504e9980e9be488268.js"/><link as="script" rel="preload" href="/b87a4c7beecdc02395d881c3e72801930515b226-2b5f76b0ff898da5db0c.js"/><link as="script" rel="preload" href="/component---src-layouts-blog-post-tsx-edff95c2a0ba61566cbb.js"/><link as="fetch" rel="preload" href="/page-data/blog/2020/devops/app-stack-with-terraform-on-gcp/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2070580351.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3794076007.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="flex items-center justify-between flex-wrap bg-blue-700 p-6"><a href="/" class=""><div class="flex items-center flex-shrink-0 text-white mr-6"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained rounded-full shadow-2xl w-8 h-8 mr-4 inline-block"><div style="max-width:960px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;960&#x27; width=&#x27;960&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#e8e8d8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/3a12aa0364d1851eaab41841f8a12b88/8d565/coffee-art.webp 240w,/static/3a12aa0364d1851eaab41841f8a12b88/21b1a/coffee-art.webp 480w,/static/3a12aa0364d1851eaab41841f8a12b88/d6f60/coffee-art.webp 960w" sizes="(min-width: 960px) 960px, 100vw"/><img data-gatsby-image-ssr="" class="rounded-full" data-main-image="" style="opacity:0" sizes="(min-width: 960px) 960px, 100vw" decoding="async" loading="lazy" data-src="/static/3a12aa0364d1851eaab41841f8a12b88/d4aca/coffee-art.jpg" data-srcset="/static/3a12aa0364d1851eaab41841f8a12b88/f9edd/coffee-art.jpg 240w,/static/3a12aa0364d1851eaab41841f8a12b88/97a19/coffee-art.jpg 480w,/static/3a12aa0364d1851eaab41841f8a12b88/d4aca/coffee-art.jpg 960w" alt="avatar"/></picture><noscript><picture><source type="image/webp" srcSet="/static/3a12aa0364d1851eaab41841f8a12b88/8d565/coffee-art.webp 240w,/static/3a12aa0364d1851eaab41841f8a12b88/21b1a/coffee-art.webp 480w,/static/3a12aa0364d1851eaab41841f8a12b88/d6f60/coffee-art.webp 960w" sizes="(min-width: 960px) 960px, 100vw"/><img data-gatsby-image-ssr="" class="rounded-full" data-main-image="" style="opacity:0" sizes="(min-width: 960px) 960px, 100vw" decoding="async" loading="lazy" src="/static/3a12aa0364d1851eaab41841f8a12b88/d4aca/coffee-art.jpg" srcSet="/static/3a12aa0364d1851eaab41841f8a12b88/f9edd/coffee-art.jpg 240w,/static/3a12aa0364d1851eaab41841f8a12b88/97a19/coffee-art.jpg 480w,/static/3a12aa0364d1851eaab41841f8a12b88/d4aca/coffee-art.jpg 960w" alt="avatar"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><span class="font-semibold text-xl tracking-tight inline-block">Andri</span></div></a><div class="block flex-grow text-right"><a href="/" class="mt-4 lg:inline-block lg:mt-0 text-blue-200 hover:text-white mr-4">Home</a><a href="/blog/" class="mt-4 lg:inline-block lg:mt-0 text-blue-200 hover:text-white mr-4">Blog</a><a href="/now/" class="mt-4 lg:inline-block lg:mt-0 text-blue-200 hover:text-white mr-4">Now</a></div></nav><div class="pt-4 bg-gray-200 py-2 md:py-10 md:px-10 min-h-screen md:flex justify-center"><div class="bg-white max-w-4xl py-10 shadow px-5 lg:px-10 min-w-half-screen"><div><h1 class="text-gray-900 font-semibold text-xl md:text-3xl">Deploying a Full-Stack app on Google with Terraform</h1><div class="text-base text-gray-600 flex justify-start mb-4"><p>Jun 18, 2020</p></div><div class="mb-4 "><span class="andri-tag text-base">hosting</span><span class="andri-tag text-base">cloud</span></div></div><div class="mb-6"></div><div class="markdown md:text-base"><p>In this series, we are going to setup continuous deployment on Github Actions that will deploy a full environment in the cloud. Then we will setup a scheduled action to tear it all down, if we're not using it.</p>
<ul>
<li>Part 1: Covers the infrastructure setup and backend</li>
<li>Part 2: Covers Github Actions</li>
</ul>
<blockquote>
<p>Note: While this is perfectly fine for development-environments, you should probably NOT do this in production.</p>
</blockquote>
<h2 id="motivation" style="position:relative;"><a href="#motivation" aria-label="motivation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Motivation</h2>
<p>I didn't like paying for hosting on projects that I rarely have time to work on. So, I figured that if I could describe my environment decleratively, then I could just create automatically when I need it, and delete it automatically when I don't.</p>
<h2 id="before-we-begin" style="position:relative;"><a href="#before-we-begin" aria-label="before we begin permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Before we begin</h2>
<p>You will need a few things before we get started.</p>
<ul>
<li>A Google Cloud account</li>
<li>A Google Cloud project</li>
<li>Terraform installed</li>
<li>A <a href="https://cloud.google.com/iam/docs/creating-managing-service-account-keys">service-account</a> with a JSON key file.</li>
<li>The following roles on your service-account: Cloud Build Service Account, Cloud Build Editor, Cloud SQL Admin, Editor, Service Account User, Cloud, Run Admin, Storage Admin</li>
</ul>
<p>When you have the JSON key file, you can add it to an environmental variable while you work with Terraform. If you forget to add this to ENV, then Terraform won't be able to talk to GCP.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=groot data-host=localhost></span></span><span class="token builtin class-name">export</span> <span class="token assign-left variable">GOOGLE_CREDENTIALS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> ~/Downloads/path-to-my-secret-service-account.json<span class="token variable">)</span></span></code></pre></div>
<blockquote>
<p>Note: We are giving this service-account some pretty broad permissions on our project. So, be careful of not putting the file into Git or anything like that. I also recommend trimming these permissions manually.</p>
</blockquote>
<h2 id="describing-our-environment" style="position:relative;"><a href="#describing-our-environment" aria-label="describing our environment permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Describing our environment</h2>
<p>Hashicorp's Terraform is "infrastructure as code", or as I would put it: "A declaritive way of describing your hosting environment". Instead of telling Google or Amazon what to do, we tell Terraform how it should look like. Terraform then does the required API calls, and if everything is as it should be, it will do nothing at all.</p>
<p>This may seem overly complicated, but by doing this, copying an environment is trivial. If there's a new person on your team that wants to know what environments are running, we can look in one place.</p>
<p>We will be deploying:</p>
<ul>
<li>a Postgres database</li>
<li>a storage bucket</li>
<li>a managed container with a Go backend</li>
</ul>
<h3 id="initial-terraform-configuration" style="position:relative;"><a href="#initial-terraform-configuration" aria-label="initial terraform configuration permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initial Terraform configuration</h3>
<p>Terraform configuration-files have a <code class="language-text">.tf</code> postfix. To keep things simple, we'll only use one file (<code class="language-text">main.tf</code>). The file is rather large, so we will start small and then add to it.</p>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">provider<span class="token type variable"> "google" </span></span><span class="token punctuation">{</span>
  <span class="token property">project</span> <span class="token punctuation">=</span> var.project
  <span class="token property">region</span>  <span class="token punctuation">=</span> var.region
  <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"= 3.23"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This just tells Terraform that we'll be using the Google Cloud provider. We lock the version, so that our configuration file matches the provider API used.</p>
<h3 id="persisting-our-state" style="position:relative;"><a href="#persisting-our-state" aria-label="persisting our state permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Persisting our state</h3>
<p>If you run Terraform locally, you might notice a <code class="language-text">.tfstate</code> file. It tells Terraform which services are already created, their last known configuration and so on. We will be using Terraform as a part of our builds, so we want this state to be persisted somewhere globally.</p>
<p>To be able to do that, you need to manually create a bucket called <code class="language-text">tfstate.internal.example.com</code> (or whatever you want, just make it match the configuration below) in your Google Cloud project.</p>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">terraform</span> <span class="token punctuation">{</span>
  <span class="token keyword">backend<span class="token type variable"> "gcs" </span></span><span class="token punctuation">{</span>
    <span class="token property">bucket</span> <span class="token punctuation">=</span> <span class="token string">"tfstate.internal.example.com"</span>
    <span class="token property">prefix</span> <span class="token punctuation">=</span> <span class="token string">"terraform/state"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<blockquote>
<p>Note: The Terraform state bucket cannot be managed by Terraform. You must create it yourself.</p>
</blockquote>
<h3 id="variables" style="position:relative;"><a href="#variables" aria-label="variables permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variables</h3>
<p>Using variables allow us to define stuff like "region" and "database_secret" in one place. Terraform variables can also be set using ENV, like "TF_VAR_REGION" will be matched to a "region" variable.</p>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">variable<span class="token type variable"> "region" </span></span><span class="token punctuation">{</span>
  <span class="token property">type</span>        <span class="token punctuation">=</span> string
  <span class="token property">description</span> <span class="token punctuation">=</span> <span class="token string">"GCP region"</span>
  <span class="token property">default</span>     <span class="token punctuation">=</span> <span class="token string">"europe-west1"</span>
<span class="token punctuation">}</span>

<span class="token keyword">variable<span class="token type variable"> "project" </span></span><span class="token punctuation">{</span>
  <span class="token property">type</span>        <span class="token punctuation">=</span> string
  <span class="token property">description</span> <span class="token punctuation">=</span> <span class="token string">"GCP project"</span>
  <span class="token property">default</span>     <span class="token punctuation">=</span> <span class="token string">"example-project"</span>
<span class="token punctuation">}</span>

<span class="token comment"># Used by our non-root database user</span>
<span class="token keyword">variable<span class="token type variable"> "db_password" </span></span><span class="token punctuation">{</span>
  <span class="token property">type</span>        <span class="token punctuation">=</span> string
  <span class="token property">description</span> <span class="token punctuation">=</span> <span class="token string">"Database secret"</span>
<span class="token punctuation">}</span>

<span class="token comment"># Used by our deployment pipeline to set the new image.</span>
<span class="token keyword">variable<span class="token type variable"> "docker_tag" </span></span><span class="token punctuation">{</span>
  <span class="token property">type</span>        <span class="token punctuation">=</span> string
  <span class="token property">description</span> <span class="token punctuation">=</span> <span class="token string">"Tag for Docker Image"</span>
  <span class="token property">default</span>     <span class="token punctuation">=</span> <span class="token string">"latest"</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h3 id="adding-the-database" style="position:relative;"><a href="#adding-the-database" aria-label="adding the database permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding the database</h3>
<p>Since this is just a teeny tiny staging environment, we buy the cheapest database server around. We are using Postgres 11, there are also <a href="https://www.terraform.io/docs/providers/google/r/sql_database_instance.html">other database types and options</a>.</p>
<blockquote>
<p>Note: We will be destroying our database periodically, so if you need to store something permenently, you should do backups.</p>
</blockquote>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">resource <span class="token type variable">"google_sql_database_instance"</span></span> <span class="token string">"db"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span>             <span class="token punctuation">=</span> <span class="token string">"db"</span>
  <span class="token property">region</span>           <span class="token punctuation">=</span> var.region
  <span class="token property">database_version</span> <span class="token punctuation">=</span> <span class="token string">"POSTGRES_11"</span>
  <span class="token keyword">settings</span> <span class="token punctuation">{</span>
    <span class="token property">tier</span> <span class="token punctuation">=</span> <span class="token string">"db-f1-micro"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">resource <span class="token type variable">"google_sql_database"</span></span> <span class="token string">"dbname"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span>     <span class="token punctuation">=</span> <span class="token string">"staging"</span>
  <span class="token property">instance</span> <span class="token punctuation">=</span> google_sql_database_instance.db.name
<span class="token punctuation">}</span>

<span class="token keyword">resource <span class="token type variable">"google_sql_user"</span></span> <span class="token string">"dbuser"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span>     <span class="token punctuation">=</span> <span class="token string">"pgadmin"</span>
  <span class="token property">instance</span> <span class="token punctuation">=</span> google_sql_database_instance.db.name
  <span class="token property">password</span> <span class="token punctuation">=</span> var.db_password
<span class="token punctuation">}</span></code></pre></div>
<p>You will notice that we are referencing our variables (like <code class="language-text">var.db_password</code>), but we're also referencing the resources controlled by Terraform. In this case, we fetch the instance-name from the newly created instance. In a normal setup, we'd have to know this information to be able to proceed. By using Terraform, it manages all of these references for us.</p>
<h3 id="adding-a-storage-bucket-for-assets" style="position:relative;"><a href="#adding-a-storage-bucket-for-assets" aria-label="adding a storage bucket for assets permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a storage bucket for assets</h3>
<p>My application uses <a href="https://gocloud.dev">Go Cloud Development Kit</a> to store assets. And on Google Cloud, that means adding a Cloud Storage bucket to the project. At the moment, this bucket is private. Check the <a href="https://www.terraform.io/docs/providers/google/r/storage_bucket_access_control.html">documentation</a> if you want a public bucket.</p>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">resource <span class="token type variable">"google_storage_bucket"</span></span> <span class="token string">"assets"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span>     <span class="token punctuation">=</span> <span class="token string">"assets.example.com"</span>
  <span class="token property">location</span> <span class="token punctuation">=</span> <span class="token string">"EU"</span>
  <span class="token comment">#force_destroy = true # If you want this destroyed when we take our environment down, uncomment this line</span>
  <span class="token property">bucket_policy_only</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="adding-a-cloud-run-service" style="position:relative;"><a href="#adding-a-cloud-run-service" aria-label="adding a cloud run service permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a cloud-run service</h3>
<p>This guide is not going to cover building Docker images or creating Dockerfiles. In the second part of this guide, we will build a docker-image, push it to Container Registry and pass it on to Cloud Run.</p>
<p>I was going to use Github Packages, but Cloud-Run only works from Google's Container Registry.</p>
<p>For demonstration purposes, we are just using a sample image from Google, and the ENV variables will not be used. But I spent quite some time digging up how to make the SQL connection work, so I think leaving it in will be helpful The <code class="language-text">metadata</code> part tells the Google SQL Proxy how to connect to the database and how many instances we will allow Google to scale to.</p>
<div class="gatsby-highlight" data-language="hcl"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">resource <span class="token type variable">"google_cloud_run_service"</span></span> <span class="token string">"backend"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span>     <span class="token punctuation">=</span> <span class="token string">"backend"</span>
  <span class="token property">location</span> <span class="token punctuation">=</span> var.region

  <span class="token keyword">template</span> <span class="token punctuation">{</span>
    <span class="token keyword">spec</span> <span class="token punctuation">{</span>
      <span class="token keyword">containers</span> <span class="token punctuation">{</span>
        <span class="token property">image</span> <span class="token punctuation">=</span> <span class="token string">"gcr.io/cloudrun/hello:<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">docker_tag</span><span class="token punctuation">}</span></span>"</span>
        <span class="token comment"># Demonstration purposes only</span>
        <span class="token keyword">env</span> <span class="token punctuation">{</span>
          <span class="token property">name</span>  <span class="token punctuation">=</span> <span class="token string">"PG_STRING"</span>
          <span class="token property">value</span> <span class="token punctuation">=</span> <span class="token string">"host=/cloudsql/<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>google_sql_database_instance<span class="token punctuation">.</span>db<span class="token punctuation">.</span>connection_name<span class="token punctuation">}</span></span> user=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>google_sql_user<span class="token punctuation">.</span>dbuser<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> password=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>google_sql_user<span class="token punctuation">.</span>dbuser<span class="token punctuation">.</span>password<span class="token punctuation">}</span></span> dbname=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>google_sql_database<span class="token punctuation">.</span>dbname<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> sslmode=require"</span>
        <span class="token punctuation">}</span>
        <span class="token comment"># Demonstration purposes only</span>
        <span class="token keyword">env</span> <span class="token punctuation">{</span>
          <span class="token property">name</span>  <span class="token punctuation">=</span> <span class="token string">"BUCKET"</span>
          <span class="token property">value</span> <span class="token punctuation">=</span> <span class="token string">"gs://<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>google_storage_bucket<span class="token punctuation">.</span>assets<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">metadata</span> <span class="token punctuation">{</span>
      <span class="token property">annotations</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
        <span class="token property">"autoscaling.knative.dev/maxScale"</span>      <span class="token punctuation">=</span> <span class="token string">"3"</span>
        <span class="token property">"run.googleapis.com/cloudsql-instances"</span> <span class="token punctuation">=</span> <span class="token string">"<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">project</span><span class="token punctuation">}</span></span>:<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">region</span><span class="token punctuation">}</span></span>:<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>google_sql_database_instance<span class="token punctuation">.</span>db<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>"</span>
        <span class="token property">"run.googleapis.com/client-name"</span>        <span class="token punctuation">=</span> <span class="token string">"terraform"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token property">autogenerate_revision_name</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre></div>
<h3 id="custom-name-for-your-cloud-run-instance" style="position:relative;"><a href="#custom-name-for-your-cloud-run-instance" aria-label="custom name for your cloud run instance permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom name for your Cloud Run instance</h3>
<p>Google offers automatic TLS and load balancing with custom-names. First you have to validate your domain with Google, and then you have to <a href="https://cloud.google.com/run/docs/mapping-custom-domains#adding_verified_domain_owners_to_other_users_or_service_accounts">add your service-account to it</a>.</p>
<p>When that is done, you can use the following to add a custom dns name.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"># https://cloud.google.com/run/docs/mapping-custom-domains#adding_verified_domain_owners_to_other_users_or_service_accounts
resource &quot;google_cloud_run_domain_mapping&quot; &quot;backend&quot; {
  location = var.region
  name     = &quot;api.example.com&quot;

  metadata {
    namespace = var.project
  }

  spec {
    route_name = google_cloud_run_service.backend.name
  }
}</code></pre></div>
<h2 id="terraform-plan" style="position:relative;"><a href="#terraform-plan" aria-label="terraform plan permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Terraform Plan</h2>
<p>Navigate to your directory. I keep mine in <code class="language-text">devops/google/main.tf</code>.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=groot data-host=localhost></span></span>terraform plan</code></pre></div>
<h2 id="terraform-apply" style="position:relative;"><a href="#terraform-apply" aria-label="terraform apply permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Terraform Apply</h2>
<p>If you agree with the changes suggested by <code class="language-text">terraform plan</code> you can run:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=groot data-host=localhost></span></span>terraform apply</code></pre></div>
<h2 id="terraform-destroy" style="position:relative;"><a href="#terraform-destroy" aria-label="terraform destroy permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Terraform Destroy</h2>
<p>To clean up all the resources we have created, we can run:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=groot data-host=localhost></span></span>terraform destroy</code></pre></div>
<blockquote>
<p>Note: I don't take any responsibility for what you might leave on your account. So make sure that the cleanup worked as expected.</p>
</blockquote>
<h2 id="part-2-setting-this-up-on-github-actions" style="position:relative;"><a href="#part-2-setting-this-up-on-github-actions" aria-label="part 2 setting this up on github actions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Part 2: Setting this up on Github Actions.</h2>
<p>I'll add a link to the second part of this blog post as soon as it's ready.</p></div><p> </p><div class="share-box">Did you like the article? Please share. If not, please<!-- --> <a href="https://twitter.com/andrioid" target="_blank" rel="noreferrer">send me a DM</a><p> </p><button aria-label="linkedin" class="react-share__ShareButton mr-1" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="40" height="40"><rect width="64" height="64" rx="0" ry="0" fill="#007fb1"></rect><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="twitter" class="react-share__ShareButton mr-1" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="40" height="40"><rect width="64" height="64" rx="0" ry="0" fill="#00aced"></rect><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="facebook" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="40" height="40"><rect width="64" height="64" rx="0" ry="0" fill="#3b5998"></rect><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2020/devops/app-stack-with-terraform-on-gcp";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-f7a1dd520c50691285c6.js"],"app":["/app-9a504e9980e9be488268.js"],"component---src-layouts-blog-post-tsx":["/component---src-layouts-blog-post-tsx-edff95c2a0ba61566cbb.js"],"component---src-pages-404-js":["/component---src-pages-404-js-90c41a7bbf3d16a8b804.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-0ee112de561200fbd9e3.js"],"component---src-pages-index-js":["/component---src-pages-index-js-b4fdc5520165d17d07d7.js"],"component---src-pages-now-js":["/component---src-pages-now-js-bf3b4c2db684b14bfdd1.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-c8c0939a9dccec37254e.js"]};/*]]>*/</script><script src="/polyfill-f7a1dd520c50691285c6.js" nomodule=""></script><script src="/component---src-layouts-blog-post-tsx-edff95c2a0ba61566cbb.js" async=""></script><script src="/b87a4c7beecdc02395d881c3e72801930515b226-2b5f76b0ff898da5db0c.js" async=""></script><script src="/app-9a504e9980e9be488268.js" async=""></script><script src="/framework-8120a7f15645c7323525.js" async=""></script><script src="/webpack-runtime-af92fa083a7f98bc41ca.js" async=""></script></body></html>